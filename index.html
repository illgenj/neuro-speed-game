<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neuro-Speed Elite 22.0 + DYNAMIC DENSITY</title>
    <style>
        :root {
            /* Core Theme */
            --bg: #020617;
            --panel: #0f172a;
            --text: #f8fafc;
            --glass: rgba(15, 23, 42, 0.95);
            
            /* Game Colors */
            --accent: #0ea5e9;  /* Standard Target */
            --success: #10b981; /* Correct Hit */
            --fail: #ef4444;    /* Miss/Penalty */
            --gold: #f59e0b;    /* Bonus */
            --quantum: #a855f7; /* Teleporting/Special */
            --hyper: #f43f5e;   /* Fast/Dangerous */
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; user-select: none; }
        
        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            touch-action: none;
        }

        /* --- Header & Interactive Stats --- */
        .header {
            height: 80px;
            width: 100%;
            display: flex;
            align-items: center;
            background: var(--panel);
            border-bottom: 2px solid #1e293b;
            z-index: 50;
            flex-shrink: 0;
            padding: 0 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }

        .stat-group {
            display: flex;
            flex-grow: 1;
            justify-content: space-around;
            align-items: center;
            height: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        .stat {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-width: 80px;
        }

        .stat-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #94a3b8;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
            color: var(--text);
            text-shadow: 0 0 10px rgba(255,255,255,0.1);
        }

        /* --- Game Board --- */
        #game-board {
            flex-grow: 1;
            position: relative;
            width: 100%;
            overflow: hidden;
            cursor: crosshair;
        }

        /* --- Targets --- */
        .target {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transform: translate(-50%, -50%) scale(0);
            animation: spawn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            box-shadow: 0 0 15px currentColor;
            z-index: 10;
        }

        .target::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.8);
            opacity: 0.5;
            animation: pulse 1s infinite;
        }

        /* Target Types */
        .t-standard { width: 60px; height: 60px; background: var(--accent); color: var(--accent); }
        .t-gold { width: 50px; height: 50px; background: var(--gold); color: var(--gold); box-shadow: 0 0 20px var(--gold); }
        .t-hyper { width: 40px; height: 40px; background: var(--hyper); color: var(--hyper); animation-duration: 0.15s; }
        .t-quantum { width: 55px; height: 55px; background: var(--quantum); color: var(--quantum); opacity: 0.8; }

        /* Effects */
        .click-effect {
            position: absolute;
            pointer-events: none;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: ripple 0.4s linear forwards;
            z-index: 20;
        }

        /* --- UI Overlays --- */
        .overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(2, 6, 23, 0.85);
            backdrop-filter: blur(8px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 0.3s;
        }
        
        .overlay.hidden { opacity: 0; pointer-events: none; }

        h1 {
            font-size: 2.5rem;
            margin: 0 0 1rem 0;
            background: linear-gradient(135deg, var(--accent), var(--quantum));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
        }

        .btn {
            padding: 1rem 3rem;
            font-size: 1.25rem;
            font-weight: bold;
            color: white;
            background: linear-gradient(90deg, var(--accent), var(--quantum));
            border: none;
            border-radius: 99px;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.2s;
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.4);
        }

        .btn:active { transform: scale(0.95); }
        .btn:hover { box-shadow: 0 0 30px rgba(168, 85, 247, 0.6); }

        /* --- Animations --- */
        @keyframes spawn { to { transform: translate(-50%, -50%) scale(1); } }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.5; } 100% { transform: scale(1.4); opacity: 0; } }
        @keyframes ripple { 
            0% { width: 0; height: 0; opacity: 0.8; border: 2px solid white; } 
            100% { width: 100px; height: 100px; opacity: 0; border: 2px solid white; } 
        }
        @keyframes float { 0%, 100% { transform: translate(-50%, -50%) translateY(0); } 50% { transform: translate(-50%, -50%) translateY(-10px); } }

    </style>
</head>
<body>

    <header class="header">
        <div class="stat-group">
            <div class="stat">
                <span class="stat-label">Score</span>
                <span class="stat-value" id="score-el">0</span>
            </div>
            <div class="stat">
                <span class="stat-label">Density</span>
                <span class="stat-value" id="density-el">1.0x</span>
            </div>
            <div class="stat">
                <span class="stat-label">Time</span>
                <span class="stat-value" id="time-el">60</span>
            </div>
        </div>
    </header>

    <main id="game-board"></main>

    <div id="start-screen" class="overlay">
        <h1>NEURO-SPEED ELITE</h1>
        <p style="color: #94a3b8; margin-bottom: 2rem;">Tap targets. Avoid misses. Speed increases.</p>
        <button class="btn" onclick="game.start()">INITIATE</button>
    </div>

    <div id="game-over-screen" class="overlay hidden">
        <h1 style="color: var(--fail)">SYSTEM HALTED</h1>
        <div class="stat-group" style="flex-grow: 0; gap: 2rem; margin-bottom: 2rem;">
            <div class="stat">
                <span class="stat-label">Final Score</span>
                <span class="stat-value" id="final-score">0</span>
            </div>
            <div class="stat">
                <span class="stat-label">Peak Density</span>
                <span class="stat-value" id="final-density">0.0</span>
            </div>
        </div>
        <button class="btn" onclick="game.start()">REBOOT</button>
    </div>

    <script>
        class NeuroGame {
            constructor() {
                this.score = 0;
                this.time = 60;
                this.density = 1.0;
                this.isPlaying = false;
                this.spawnRate = 1000;
                this.lastSpawn = 0;
                this.targets = [];
                
                // Elements
                this.board = document.getElementById('game-board');
                this.scoreEl = document.getElementById('score-el');
                this.timeEl = document.getElementById('time-el');
                this.densityEl = document.getElementById('density-el');
                this.startScreen = document.getElementById('start-screen');
                this.endScreen = document.getElementById('game-over-screen');
                
                // Bindings
                this.loop = this.loop.bind(this);
                this.board.addEventListener('pointerdown', (e) => this.handleMiss(e));
            }

            start() {
                this.reset();
                this.isPlaying = true;
                this.startScreen.classList.add('hidden');
                this.endScreen.classList.add('hidden');
                this.lastSpawn = performance.now();
                requestAnimationFrame(this.loop);
                
                // Timer
                this.timerInterval = setInterval(() => {
                    this.time--;
                    this.timeEl.innerText = this.time;
                    
                    // Increase Density (Difficulty) over time
                    if (this.time % 5 === 0) {
                        this.density += 0.2;
                        this.spawnRate = Math.max(200, 1000 - (this.density * 100));
                        this.updateUI();
                    }

                    if (this.time <= 0) this.end();
                }, 1000);
            }

            reset() {
                this.score = 0;
                this.time = 60;
                this.density = 1.0;
                this.spawnRate = 1000;
                this.board.innerHTML = ''; // Clear board
                this.updateUI();
            }

            end() {
                this.isPlaying = false;
                clearInterval(this.timerInterval);
                document.getElementById('final-score').innerText = this.score;
                document.getElementById('final-density').innerText = this.density.toFixed(1) + 'x';
                this.endScreen.classList.remove('hidden');
            }

            updateUI() {
                this.scoreEl.innerText = this.score;
                this.densityEl.innerText = this.density.toFixed(1) + "x";
            }

            spawnTarget() {
                const typeRoll = Math.random();
                let type = 't-standard';
                let points = 10;
                let duration = 3000;

                // Dynamic Logic for Target Types
                if (typeRoll > 0.9) { type = 't-gold'; points = 50; duration = 1500; }
                else if (typeRoll > 0.75) { type = 't-hyper'; points = 25; duration = 1000; }
                else if (typeRoll > 0.6 && this.density > 2.0) { type = 't-quantum'; points = 30; duration = 2000; }

                const el = document.createElement('div');
                el.className = `target ${type}`;
                
                // Random Position (padded)
                const x = 10 + Math.random() * 80;
                const y = 10 + Math.random() * 80;
                el.style.left = `${x}%`;
                el.style.top = `${y}%`;

                // Self-destruct logic
                const timeout = setTimeout(() => {
                    if (el.parentNode) {
                        el.remove();
                        this.createEffect(x, y, 'fail'); // Visual penalty for missing
                    }
                }, duration / this.density); // Density speeds up lifetime

                // Click Handler
                el.addEventListener('pointerdown', (e) => {
                    e.stopPropagation(); // Prevent triggering background miss
                    clearTimeout(timeout);
                    this.hit(el, points, x, y);
                });

                this.board.appendChild(el);
            }

            hit(el, points, x, y) {
                this.score += points;
                this.updateUI();
                el.remove();
                this.createEffect(x, y, 'success');
                
                // Quantum Mechanic: Hitting a quantum target spawns another immediately
                if (el.classList.contains('t-quantum')) {
                    this.spawnTarget();
                }
            }

            handleMiss(e) {
                if (!this.isPlaying) return;
                // Penalize clicks on background
                this.score = Math.max(0, this.score - 5);
                this.updateUI();
                
                const rect = this.board.getBoundingClientRect();
                const x = ((e.clientX - rect.left) / rect.width) * 100;
                const y = ((e.clientY - rect.top) / rect.height) * 100;
                
                this.createEffect(x, y, 'fail');
            }

            createEffect(x, y, type) {
                const effect = document.createElement('div');
                effect.className = 'click-effect';
                effect.style.left = `${x}%`;
                effect.style.top = `${y}%`;
                effect.style.borderColor = type === 'success' ? 'var(--success)' : 'var(--fail)';
                effect.style.boxShadow = `0 0 10px ${type === 'success' ? 'var(--success)' : 'var(--fail)'}`;
                this.board.appendChild(effect);
                setTimeout(() => effect.remove(), 400);
            }

            loop(timestamp) {
                if (!this.isPlaying) return;

                const delta = timestamp - this.lastSpawn;
                if (delta > (this.spawnRate / Math.sqrt(this.density))) {
                    this.spawnTarget();
                    this.lastSpawn = timestamp;
                }

                requestAnimationFrame(this.loop);
            }
        }

        const game = new NeuroGame();
    </script>
</body>
</html>
