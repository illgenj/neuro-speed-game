<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description"
        content="Neuro-Speed Elite ‚Äî A science-inspired adaptive cognitive speed training game. Train your brain with rapid visual processing challenges.">
    <meta name="theme-color" content="#0a0f1e">
    <meta property="og:title" content="Neuro-Speed Elite 8.0">
    <meta property="og:description" content="Science-inspired adaptive cognitive speed training game.">
    <meta property="og:type" content="website">

    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/svg+xml" href="/icon.svg">
    <link rel="apple-touch-icon" href="/icon.svg">

    <title>Neuro-Speed Elite 8.0</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=JetBrains+Mono:wght@400;700;800&display=swap"
        rel="stylesheet">
</head>

<body>

    <div class="header">
        <div class="stat-group">
            <div class="stat" id="btn-user">
                <span class="label">AGENT</span>
                <span id="user-display" class="val">---</span>
                <span id="daily-streak-badge" style="font-size: 0.6rem; color: var(--gold);">üî• 0</span>
            </div>
            <div class="stat" id="btn-analytics">
                <span class="label">RATING</span>
                <span id="score-val" class="val xp-val">0</span>
            </div>
            <div class="stat" id="btn-analytics-2">
                <span class="label">LATENCY</span>
                <span id="speed-val" class="val">---ms</span>
            </div>
            <div class="stat" id="btn-audio">
                <span class="label">AUDIO</span>
                <span id="audio-icon" class="val">OFF</span>
            </div>
            <div class="stat" id="btn-leaderboard">
                <span class="label">GRID</span>
                <span id="mode-indicator" class="val">T1</span>
            </div>
        </div>
    </div>

    <div id="zone-container">
        <div id="zone-fill"></div>
        <div id="zone-label" data-mult="1.0">NEURAL SYNC: 1.0x</div>
    </div>

    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        <div id="sync-indicator"></div>
        <div id="version-display"
            style="position: absolute; bottom: 10px; right: 10px; font-size: 0.6rem; color: var(--text-muted); opacity: 0.5; font-family: var(--font-mono); z-index: 100;">
            v8.1.0</div>

        <div id="system-message" class="hidden">SYSTEM READY</div>
        <div id="mini-status"><span class="blink">‚óè</span> ESTABLISHING UPLINK...</div>

        <div id="main-overlay" class="overlay">
            <h2 id="msg-title">NEURAL READY</h2>
            <p id="msg-body" style="margin-bottom: 15px;">Secure Channel Established.</p>

            <div id="sync-vis-container">
                <span id="sync-percentage">0%</span>
                <span class="sync-label-mini">SERVER VERIFICATION</span>
                <div id="sync-bar-bg" style="margin-top: 8px;">
                    <div id="sync-bar-fill"></div>
                </div>
            </div>

            <button id="start-btn" class="action-btn">INITIATE SEQUENCE</button>
            <button id="btn-lb-main" class="action-btn secondary-btn" style="margin-top: 10px; font-size: 0.75rem;">üåê
                GLOBAL GRID</button>
        </div>

        <div id="analytics-overlay" class="overlay hidden">
            <div id="secret-pixel"
                style="position:absolute; top:5px; left:5px; width:10px; height:10px; opacity:0; cursor:pointer;"></div>
            <h2
                style="text-align:center; color: var(--accent); font-family: var(--font-mono); letter-spacing: 3px; margin-bottom: 4px;">
                SYSTEM REPORT</h2>

            <!-- Tabs -->
            <div class="analytics-tabs">
                <button class="analytics-tab active" data-tab="performance">PERFORMANCE</button>
                <button class="analytics-tab" data-tab="history">TRAINING LOG</button>
            </div>

            <!-- Tab: Performance -->
            <div class="analytics-panel" id="tab-performance">
                <canvas id="chart-canvas"
                    style="width: 100%; height: 100px; margin: 8px 0; border-radius: 8px;"></canvas>

                <div class="analytics-grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 12px;">
                    <div class="a-card">
                        <div class="label">PEAK LATENCY</div>
                        <div class="val" id="stat-peak">0ms</div>
                    </div>
                    <div class="a-card">
                        <div class="label">ACCURACY</div>
                        <div class="val" id="stat-acc-total">0%</div>
                    </div>
                    <div class="a-card">
                        <div class="label">GRADE</div>
                        <div class="val" id="stat-grade" style="color:var(--gold)">--</div>
                    </div>
                    <div class="a-card">
                        <div class="label">SESSIONS</div>
                        <div class="val" id="stat-sessions">0</div>
                    </div>
                    <div class="a-card">
                        <div class="label">UPTIME</div>
                        <div class="val" id="stat-uptime">0.0h</div>
                    </div>
                    <div class="a-card">
                        <div class="label">DIFFICULTY</div>
                        <div class="val" id="stat-difficulty">0</div>
                    </div>
                </div>

                <canvas id="radar-canvas" style="width: 100%; height: 150px; margin: 4px 0;"></canvas>
            </div>

            <!-- Tab: Training History -->
            <div class="analytics-panel hidden" id="tab-history">
                <canvas id="heatmap-canvas" style="width: 100%; height: 48px; margin: 8px 0;"></canvas>
                <div id="training-progress-container" style="margin: 8px 0;"></div>
                <div id="session-history-list" style="max-height: 220px; overflow-y: auto; margin: 8px 0;"></div>
                <div id="history-empty"
                    style="text-align: center; color: var(--text-muted); font-size: 0.75rem; padding: 30px; display: none;">
                    NO SESSIONS RECORDED YET
                </div>
            </div>

            <div id="security-zone" style="margin-top: 8px;"></div>

            <button class="action-btn" id="btn-achievements"
                style="font-size: 0.7rem; padding: 12px; background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(14, 165, 233, 0.15)); border: 1px solid rgba(168, 85, 247, 0.3); color: var(--quantum);">
                üèÜ ACHIEVEMENTS
            </button>

            <div id="analytics-danger-zone"
                style="margin-top: 10px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 8px;">
                <button id="btn-unlink-account" class="action-btn danger-btn" style="font-size: 0.7rem; padding: 12px;">
                    üîí SEVER LINK
                </button>
            </div>

            <button class="action-btn secondary-btn" id="btn-close-analytics" style="margin-top:8px">RETURN</button>
        </div>

        <div id="leaderboard-overlay" class="overlay hidden">
            <button class="action-btn secondary-btn" id="btn-close-lb"
                style="margin-top: 0; margin-bottom: 15px;">RETURN</button>
            <h2 style="color: var(--gold); letter-spacing: 2px;">GLOBAL GRID</h2>
            <div id="lb-loading" style="font-size: 0.8rem; opacity: 0.6; padding: 20px;">CONNECTING TO CORE...</div>
            <div id="lb-list" style="margin-bottom: 20px;"></div>
        </div>

        <div id="achievement-overlay" class="overlay hidden">
            <h2
                style="text-align:center; color: var(--quantum); font-family: var(--font-mono); letter-spacing: 3px; margin-bottom: 4px;">
                üèÜ ACHIEVEMENTS</h2>
            <div id="achievement-progress"
                style="text-align: center; font-family: var(--font-mono); font-size: 0.65rem; color: var(--text-muted); margin-bottom: 12px;">
            </div>
            <div id="achievement-grid" style="max-height: 400px; overflow-y: auto;"></div>
            <button class="action-btn secondary-btn" id="btn-close-achievements" style="margin-top:8px">RETURN</button>
        </div>

        <div id="user-overlay" class="overlay hidden">
            <h3>Select Agent</h3>
            <div id="user-list" style="max-height: 200px; overflow-y: auto;"></div>
            <button class="action-btn" style="background:transparent; border: 1px dashed #444" id="btn-new-user">+ NEW /
                RECOVER</button>
            <button class="action-btn" style="background:#334155" id="btn-close-user">CANCEL</button>
        </div>

        <div id="new-link-overlay" class="overlay hidden">
            <h3 style="color: var(--accent); letter-spacing: 2px;">CONNECTION</h3>
            <p style="font-size: 0.8rem; opacity: 0.7; margin-bottom: 20px;">ENTER DESIGNATION TO CREATE OR RECOVER</p>

            <input type="text" id="new-agent-name" placeholder="AGENT_ID" maxlength="12" autocomplete="off">

            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button id="btn-create-link" class="action-btn">INITIALIZE</button>
                <button id="btn-cancel-link" class="action-btn secondary-btn">ABORT</button>
            </div>
        </div>

        <div id="pin-overlay" class="overlay hidden">
            <h3 id="pin-title" style="color: var(--hyper); letter-spacing: 2px;">SECURITY CHECK</h3>
            <p id="pin-reason" class="pin-subtitle">AUTHORIZATION REQUIRED</p>

            <div id="pin-input-container">
                <input type="password" inputmode="numeric" pattern="[0-9]*" id="pin-input-field" maxlength="4"
                    placeholder="****" autocomplete="off">
            </div>

            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button id="btn-pin-confirm" class="action-btn">AUTHENTICATE</button>
                <button id="btn-pin-cancel" class="action-btn secondary-btn">CANCEL</button>
            </div>
        </div>

        <div id="confirm-overlay" class="overlay hidden">
            <h3 style="color: var(--fail); letter-spacing: 2px;">WARNING</h3>
            <p style="margin-bottom:20px; font-size: 0.9rem;">LOCAL NEURAL PATTERN WILL BE DELETED.</p>
            <button id="btn-confirm-yes" class="action-btn danger-btn">CONFIRM DELETION</button>
            <button id="btn-confirm-no" class="action-btn secondary-btn">CANCEL</button>
        </div>

        <!-- Onboarding -->
        <div id="onboarding-overlay" class="overlay hidden">
            <div class="onboarding-dots">
                <div class="onboarding-dot active"></div>
                <div class="onboarding-dot"></div>
                <div class="onboarding-dot"></div>
            </div>

            <!-- Step 1: Science -->
            <div class="onboarding-step active">
                <span class="onboarding-icon">üß†</span>
                <div class="onboarding-title">TRAIN YOUR BRAIN</div>
                <p class="onboarding-text">
                    Neuro-Speed is an <strong>adaptive cognitive speed training</strong> game
                    inspired by neuroscience research on visual processing speed.
                </p>
                <div class="science-badge">
                    üî¨ INSPIRED BY NIH-FUNDED RESEARCH
                </div>
                <p class="disclaimer-text">
                    By initiating an uplink, you agree to the anonymous transmission of your neural-optical latency
                    metrics. Data is processed locally and in aggregate to optimize global targeting pathways.
                </p>
            </div>

            <!-- Step 2: How it works -->
            <div class="onboarding-step">
                <span class="onboarding-icon">‚ö°</span>
                <div class="onboarding-title">HOW IT WORKS</div>
                <p class="onboarding-text">
                    Shapes flash on screen for a <strong>fraction of a second</strong>.
                    Identify the center shape, the peripheral satellite, and more as you level up.
                    <br><br>
                    The game <strong>adapts to you</strong> ‚Äî getting faster as you improve,
                    always keeping you in the zone of maximum growth.
                </p>
            </div>

            <!-- Step 3: Get started -->
            <div class="onboarding-step">
                <span class="onboarding-icon">üöÄ</span>
                <div class="onboarding-title">READY TO BEGIN</div>
                <p class="onboarding-text">
                    Create your <strong>Agent ID</strong> to start training.
                    Your progress syncs to the global leaderboard.
                    <br><br>
                    Aim for <strong>daily sessions</strong> to build your streak
                    and push your reaction speed to its limits.
                </p>
            </div>

            <button id="onboarding-next-btn" class="action-btn">CONTINUE</button>
        </div>

        <!-- Session Summary -->
        <div id="session-summary-overlay" class="overlay hidden">
            <h2
                style="text-align:center; color: var(--accent); font-family: var(--font-mono); letter-spacing: 3px; margin-bottom: 8px;">
                SESSION COMPLETE</h2>
            <p id="session-summary-subtitle"
                style="text-align:center; color: var(--text-muted); font-size: 0.75rem; letter-spacing: 2px; margin-bottom: 24px;">
                TRAINING BLOCK 1 ‚Äî SESSION 1/7</p>

            <div class="analytics-grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 20px;">
                <div class="a-card">
                    <div class="label">ROUNDS</div>
                    <div class="val" id="summary-rounds">0</div>
                </div>
                <div class="a-card">
                    <div class="label">ACCURACY</div>
                    <div class="val" id="summary-accuracy">0%</div>
                </div>
                <div class="a-card">
                    <div class="label">AVG REACTION</div>
                    <div class="val" id="summary-avg-reaction">0ms</div>
                </div>
                <div class="a-card">
                    <div class="label">BEST REACTION</div>
                    <div class="val" id="summary-best-reaction">0ms</div>
                </div>
                <div class="a-card">
                    <div class="label">SPEED TREND</div>
                    <div class="val" id="summary-trend">‚Äî</div>
                </div>
                <div class="a-card">
                    <div class="label">DIFFICULTY</div>
                    <div class="val" id="summary-difficulty">0</div>
                </div>
            </div>

            <div id="summary-duration"
                style="text-align: center; color: var(--text-muted); font-size: 0.7rem; letter-spacing: 2px; margin-bottom: 20px;">
                DURATION: 0:00</div>

            <button id="btn-continue-training" class="action-btn" style="margin-bottom: 10px;">CONTINUE
                TRAINING</button>
            <button id="btn-end-session" class="action-btn secondary-btn">END SESSION</button>
        </div>

        <!-- Booster Reminder -->
        <div id="booster-reminder-overlay" class="overlay hidden">
            <span class="onboarding-icon">‚ö°</span>
            <h2
                style="text-align:center; color: var(--gold); font-family: var(--font-mono); letter-spacing: 3px; margin-bottom: 8px;">
                BOOSTER SESSION DUE</h2>
            <p
                style="text-align:center; color: var(--text-muted); font-size: 0.8rem; line-height: 1.6; margin-bottom: 24px; font-family: var(--font-mono);">
                Research shows periodic <strong style="color: var(--text);">booster sessions</strong> help maintain
                cognitive gains. It's been a while ‚Äî time for a refresher!
            </p>
            <button id="btn-start-booster" class="action-btn">START BOOSTER</button>
            <button id="btn-dismiss-booster" class="action-btn secondary-btn" style="margin-top: 10px;">LATER</button>
        </div>

    </div>

    <script type="module" src="/src/main.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').catch(error => {
                    console.log('SW registration failed:', error);
                });
            });
        }
    </script>
</body>

</html>